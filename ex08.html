<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-gl-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-2.4.2.min.js"></script>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-env>
      - numpy
      - bokeh
    </py-env>
    <title>Simple bokeh example</title>
  </head>
  <body>
    <h1>Simple bokeh example</h1>
    <div id="output"></div>
    <py-script>
      
      import json
      import pyodide
      import numpy as np
      from js import Bokeh, console, JSON
      from bokeh.embed import json_item
      from bokeh.plotting import figure
      from bokeh.resources import CDN

      p = figure(plot_width=400, plot_height=400)

      arr1 = np.random.randint(-100, 100, 100)
      arr2 = np.random.randint(-100, 100, 100)

      p.circle(arr1, arr2, size=15, line_color="navy", fill_color="orange", fill_alpha=0.5)
      p_json = json.dumps(json_item(p, "output"))

      Bokeh.embed.embed_item(JSON.parse(p_json))

    </py-script>
  </body>
</html>
